# Берем нужный базовый образ
FROM python:3.8-slim
# Копируем все файлы из текущей директории в /app контейнера
COPY ["./cicd/db", "./static", "./templates", "db_management.py", "web_view.py", \
"global.config", "management.py","./cicd/docker/requirements_flask.txt", "/app/alerter"]

RUN apt-get update && apt-get upgrade -y && apt-get install -y netcat-openbsd gcc apt-utils && apt-get clean
# Устанавливаем все зависимости
RUN pip install -r /app/alerter/requirements_flask.txt --no-cache-dir
# Устанавливаем приложение (Подробнее смотри Distutils)
WORKDIR /app/alerter

CMD python /app/alerter/web_view.py

# Говорим контейнеру какой порт слушай
EXPOSE 5000
